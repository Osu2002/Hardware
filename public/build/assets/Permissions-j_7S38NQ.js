import{d,P as x,m as _,p as c,q as y,s as e,J as v,x as a,F as g,N as h,O as u,L as f,y as w,E as C,K as A}from"./index-BC79lHc5.js";import{A as S}from"./AppLayout-DiJY6Gaj.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-C45j6faE.js";const E={components:{Link:d.Link,AppLayout:S},props:{errors:Object,role:Object,allPermissions:{type:Object,required:!0}},data(){return{form:d.useForm({id:null,permissions:[]})}},mounted(){this.role&&(this.form.id=this.role.id,this.checkCheckboxes())},methods:{submit(){this.form.permissions.length==0?this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"No permission selected!"):this.form.post(route("settings.roles.permissions.update"),{onSuccess:()=>{this.resetForm(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},resetForm(){var o=this;Object.keys(this.$data.form).forEach(function(s,t){o.$data.form[s]=""}),Object.keys(this.$props.errors).forEach(function(s,t){o.$props.errors[s]=""})},toggleCheckboxes(o){let s=document.querySelector(`#checkbox_${o}`),t=document.querySelectorAll(`.perm_checkbox.${o}`);for(let i of t)if(i.checked=s.checked,i.checked)this.form.permissions.indexOf(i.value)===-1&&this.form.permissions.push(i.value);else{let n=this.form.permissions.indexOf(i.value);this.form.permissions.splice(n,1)}},checkCheckboxes(){let o=document.querySelectorAll(".perm_checkbox");for(let s of o)for(let t of this.role.permissions)s.value===t.name&&(s.checked=!0,this.form.permissions.indexOf(s.value)===-1&&this.form.permissions.push(s.value));console.log(this.form.permissions)}}},P={class:"row"},$={class:"col-md-12"},L={class:"card mb-4"},M={class:"card-body"},j={id:"mytable",class:"display table table-responsive table-striped table-hover text-nowrap"},q={class:"text-left text-capitalize"},F={class:"text-center"},N=["id","onClick"],z={class:"row"},B=["id","value"],U=["for"],V={key:0,class:"mt-4"},D=["disabled"];function R(o,s,t,i,n,m){const b=x("AppLayout");return c(),_(b,null,{default:y(()=>[e("div",P,[e("div",$,[e("div",L,[s[3]||(s[3]=e("div",{class:"card-header pb-0"},[e("h5",null,"Permissions"),e("p",null,"Manage User Roles & Permissions.")],-1)),s[4]||(s[4]=e("hr",null,null,-1)),e("div",M,[e("form",{class:"form-validate",onSubmit:s[1]||(s[1]=v((...p)=>m.submit&&m.submit(...p),["prevent"]))},[e("table",j,[s[2]||(s[2]=e("thead",null,[e("tr",null,[e("th",{class:"text-left",width:"150px"},"Name"),e("th",{width:"14%"},"Select All"),e("th",null,"Permissions")])],-1)),e("tbody",null,[(c(!0),a(h,null,u(t.allPermissions,(p,r)=>(c(),a("tr",{key:r},[e("td",q,f(r[0].toUpperCase()+r.slice(1).replace("-"," ")),1),e("td",F,[e("input",{class:"form-check-input perm_checkbox_all",style:{cursor:"pointer"},type:"checkbox",id:"checkbox_"+r.replaceAll(" ",""),onClick:l=>m.toggleCheckboxes(r.replaceAll(" ",""))},null,8,N)]),e("td",null,[e("div",z,[(c(!0),a(h,null,u(p,l=>(c(),a("div",{class:"col-3 my-2",key:l.id},[w(e("input",{class:C("form-check-input me-2 perm_checkbox "+r.replaceAll(" ","")),id:l.name,style:{cursor:"pointer"},type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=k=>n.form.permissions=k),value:l.name},null,10,B),[[A,n.form.permissions]]),e("label",{class:"form-check-label text-capitalize",for:l.name,style:{"font-size":"13px",cursor:"pointer"}},f(l.name.replace(r+".","")),9,U)]))),128))])])]))),128))])]),o.$root.hasPermission("roles-permissions.edit")?(c(),a("div",V,[e("button",{type:"submit",class:"btn btn-main me-2",disabled:n.form.processing}," Update ",8,D)])):g("",!0)],32)])])])])]),_:1})}const H=O(E,[["render",R]]);export{H as default};
