import{d as p,P as c,x as l,p as a,t as u,q as y,s as e,F as b,M as n,N as f,O as h,L as m,J as x}from"./index-BC79lHc5.js";import{A as M}from"./AppLayout-DiJY6Gaj.js";import{F as k}from"./FileInputComponent-BBLs8XKv.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-C45j6faE.js";const S={components:{Head:p.Head,AppLayout:M,FileInputComponent:k},props:{collections:Object,allMedia:Object},data(){return{form:{c:"default"},media:p.useForm({id:"",name:"",file:""})}},mounted(){const s=new URLSearchParams(window.location.search).get("c");this.form.c=s,$("#file_uploadImagePreview").css("background-image","")},methods:{limitChars(o,s){return o.length>s?o.substring(0,s-3)+"...":o},humanReadableSize(o){let s=o,i=o/1024;return s<1024?s.toFixed(2)+"B":i<1024?i.toFixed(2)+"KB":(i/1024).toFixed(2)+"MB"},setImage(o){return"background-image:url("+o+")"},gotoCollection(o){this.form.c=o,this.$inertia.reload({preserveScroll:!1,data:{...this.form}})},deleteMediaPrompt(o,s){this.media.id=o,this.media.name=s},deleteMedia(){this.media.post(route("media.delete"),{preserveScroll:!0,onSuccess:()=>{$("#deleteMedia").modal("hide"),this.resetform(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"Profile Deleted Successfully! ")},onFinish:()=>{$("#deleteMedia").modal("hide"),this.resetform()}})},resetform(){this.media.reset("id","name","file")},uploadMedia(){this.media.transform(o=>({...o,collection:this.form.c})).post(route("media.upload"),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{this.resetform(),$("#PreviewUploadMedia").modal("hide"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"File Uploaded Successfully! ")},onFinish:()=>{$("#deleteMedia").modal("hide"),this.resetform(),$("#file_uploadImagePreview").css("background-image","")}})}}},F={class:"row"},P={class:"col-md-12"},B={class:"card mb-4"},I={class:"card-header"},L={class:"d-flex"},U={key:1,class:"btn btn-sm btn-main ms-3","data-bs-toggle":"modal","data-bs-target":"#PreviewUploadMedia"},z={class:"card-body",style:{"min-height":"50vh"}},A={class:"row"},D={class:"col-12"},V={class:"media-library-wrapper"},N={class:"row"},j=["onDblclick"],H={class:"card border overflow-hidden"},O=["title"],R={class:"card-footer p-0 p-2"},Y={class:"image-name text-capitalize"},E={class:"card border"},K=["title"],T={class:"preview rounded-top",style:{overflow:"hidden"}},q=["src","alt"],J={class:"card-footer p-0 p-2 position-relative"},G={class:"image-name text-capitalize"},Q={class:"image-name text-capitalize",style:{"font-size":"12px"}},W={class:"dropdown-menu dropdown-menu-end"},X=["href"],Z=["href"],ee=["onClick"],se={class:"modal modal-top fade",id:"deleteMedia",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},te={class:"modal-dialog modal-sm",role:"document"},oe={class:"modal-content"},de={class:"modal-body py-0 px-3"},le={class:"row"},ae={class:"col mb-1"},ie={class:"modal-footer px-3 pb-3"},ne={class:"modal fade",id:"PreviewUploadMedia",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},re={class:"modal-dialog modal-dialog-centered",role:"document"},me={class:"modal-content"},ce={class:"modal-body py-2"},ue={class:"row"},pe={class:"modal-footer pb-2"};function be(o,s,i,fe,r,d){const v=c("Head"),_=c("FileInputComponent"),g=c("AppLayout");return a(),l("div",null,[u(v,{title:"Media Library"}),u(g,null,{default:y(()=>[e("div",F,[e("div",P,[e("div",B,[e("div",I,[s[8]||(s[8]=e("h5",null,"Media Library",-1)),s[9]||(s[9]=e("p",null,"Manage Your All Media.",-1)),e("div",L,[r.form.c!="default"?(a(),l("button",{key:0,class:"btn btn-sm btn-link",onClick:s[0]||(s[0]=t=>d.gotoCollection("default"))},s[6]||(s[6]=[e("i",{class:"bx bx-left-arrow-alt",style:{"margin-top":"-2px"}},null,-1),n("Back ")]))):b("",!0),o.$root.hasPermission("media.create")?(a(),l("button",U,s[7]||(s[7]=[e("i",{class:"bx bxs-cloud-upload"},null,-1),n(" Upload Media ")]))):b("",!0)])]),e("div",z,[e("div",A,[e("div",D,[e("div",V,[e("div",N,[(a(!0),l(f,null,h(i.collections.filter(t=>t.name!="default"),t=>(a(),l("div",{class:"col-6 col-sm-4 col-md-3 collections",key:t.name,onDblclick:w=>d.gotoCollection(t.name)},[e("div",H,[e("div",{class:"card-body p-0","data-bs-toggle":"tooltip","data-bs-offset":"0,4","data-bs-placement":"right","data-bs-html":"false",title:t.name??""},s[10]||(s[10]=[e("i",{class:"bx bxs-folder"},null,-1)]),8,O),e("div",R,[e("div",Y,m(t.name??""),1)])])],40,j))),128)),(a(!0),l(f,null,h(i.allMedia,t=>(a(),l("div",{class:"col-6 col-sm-4 col-md-3 media",key:t.id},[e("div",E,[e("div",{class:"card-body p-0",title:t.name??""},[e("div",T,[e("img",{src:t.original_url,style:{width:"100%","object-fit":"cover"},alt:t.name},null,8,q)])],8,K),e("div",J,[e("div",G,m(d.limitChars(t.name??"",12)),1),e("div",Q,m(d.humanReadableSize(t.size??0)),1),s[14]||(s[14]=e("button",{type:"button",class:"btn btn-sm btn-primary btn-icon rounded-pill dropdown-toggle hide-arrow media-download","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"bx bx-dots-vertical-rounded"})],-1)),e("ul",W,[e("li",null,[e("a",{class:"dropdown-item",href:o.route("media.download",{id:t.id})},s[11]||(s[11]=[e("i",{class:"bx bx-show"},null,-1),n(" Preview ")]),8,X)]),e("li",null,[e("a",{class:"dropdown-item",href:o.route("media.download",{id:t.id})},s[12]||(s[12]=[e("i",{class:"bx bxs-download"},null,-1),n(" Download ")]),8,Z)]),e("li",null,[e("a",{href:"javascript:void(0);",class:"dropdown-item","data-bs-toggle":"modal","data-bs-target":"#deleteMedia",onClick:w=>d.deleteMediaPrompt(t.id,t.name)},s[13]||(s[13]=[e("i",{class:"bx bx-trash"},null,-1),n(" Delete ")]),8,ee)])])])])]))),128))])])])])]),e("div",se,[e("div",te,[e("div",oe,[s[16]||(s[16]=e("div",{class:"modal-header px-3 pb-2"},[e("h5",{class:"modal-title",id:"exampleModalLabel2"},"Are You Sure?")],-1)),e("form",{id:"formAccountDelete",onSubmit:s[2]||(s[2]=x((...t)=>d.deleteMedia&&d.deleteMedia(...t),["prevent"]))},[e("div",de,[e("div",le,[e("div",ae,[e("p",null,'Are you sure you want to delete "'+m(r.media.name)+'"?',1)])])]),e("div",ie,[e("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal",onClick:s[1]||(s[1]=(...t)=>d.resetform&&d.resetform(...t))},"Close"),s[15]||(s[15]=e("button",{type:"submit",class:"btn btn-sm btn-primary"},"Yes",-1))])],32)])])]),e("div",ne,[e("div",re,[e("div",me,[s[17]||(s[17]=e("div",{class:"modal-header pt-2"},[e("h5",{class:"modal-title",id:"modalCenterTitle"},"Upload media")],-1)),e("div",ce,[e("div",ue,[u(_,{id:"file_upload",parentCls:"w-100 upload-height",modelValue:r.media.file,"onUpdate:modelValue":s[3]||(s[3]=t=>r.media.file=t)},null,8,["modelValue"])])]),e("div",pe,[e("button",{type:"button",class:"btn btn-label-secondary","data-bs-dismiss":"modal",onClick:s[4]||(s[4]=(...t)=>d.resetform&&d.resetform(...t))},"Close"),e("button",{type:"button",class:"btn btn-main",onClick:s[5]||(s[5]=(...t)=>d.uploadMedia&&d.uploadMedia(...t))},"Upload")])])])])])])])]),_:1})])}const ye=C(S,[["render",be]]);export{ye as default};
