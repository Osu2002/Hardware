import{d as w,P as p,x as m,p as d,s,t as g,M as u,L as o,F as h,E as f,N as y,O as _,q as b,m as S,T as C,U as T}from"./index-BC79lHc5.js";import{S as G}from"./sweetalert2.all-BzGC4tiu.js";import{_ as A}from"./AppLayout-mR3Kj8ej.js";import{S as N,a as V}from"./swiper-BFa1zVpc.js";/* empty css                   */import{M as O,f as j,T as M,N as F,K as E}from"./free-mode-DeE1mmE8.js";import B from"./Featured_Listings-DMssRYUg.js";import U from"./ContactUs-Bp6dWYka.js";import z from"./GalleryGrid-CabLFodk.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./app-g0OZGjY8.js";import"./create-element-if-not-defined-c-MZFniL.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-CJSK8KAi.js";const J={components:{AppLayout:A,Swiper:V,SwiperSlide:N,Link:w.Link,Featured_Listings:B,ContactUs:U,GalleryGrid:z},props:{vehicle:Object,randomVehicles:Object},data(){return{isGridOpen:!1,isMobile:window.innerWidth<576,mainImageLoaded:!1,selectedGradeIndex:0,thumbLoaded:{},form:w.useForm({vehicle_name:this.$page.props.vehicle.manufacture.title+" "+this.$page.props.vehicle.vehicle_model.title,vehicle_url:route("product",{model:this.$root.stringToSlug(this.$page.props.vehicle.manufacture.title),slug:this.$root.stringToSlug(this.$page.props.vehicle.manufacture.title)+"-"+this.$root.stringToSlug(this.$page.props.vehicle.vehicle_model.title),id:this.$page.props.vehicle.id}),vehicle_id:this.$page.props.vehicle.id,stock_type:"local",name:"",email:"",mobile:"",purchase_time:"",payment_method:"",address:"",message:""}),mainImages:this.vehicle.media.filter(i=>{var e;return((e=i.custom_properties)==null?void 0:e.type)==="vehicle_main"}),thumbnailImages:this.vehicle.media.filter(i=>{var e;return((e=i.custom_properties)==null?void 0:e.type)==="vehicle_gallery"}),currentThumbIndex:0,isFullGallery:!1,isGalleryOpen:!1,galleryIndex:0}},setup(){return{modules:[O,j,M,F,E]}},computed:{selectedFuelNames(){return(this.selectedGrade.fuel_types||[]).map(e=>e.name).join(", ")},rawGrades(){try{const i=JSON.parse(this.vehicle.grades);return Array.isArray(i)?i:[i]}catch{return[]}},selectedGrade(){return this.rawGrades[this.selectedGradeIndex]||{}},gradeLabels(){return this.rawGrades.map(i=>i.grade||"")},pageurl(){return window.location.href},whatsappLink(){const i="94114001499",e=[`Hello! I’m interested in this car: *${this.vehicle.manufacture.title} ${this.vehicle.vehicle_model.title}*`,`*Year:* ${this.vehicle.year}`,"",`*View details:* ${window.location.href}`,"","Looking forward to your response!"],l=encodeURIComponent(e.join(`
`));return`https://wa.me/${i}?text=${l}`},formattedEngine(){try{const i=JSON.parse(this.vehicle.engine_capacities);return Array.isArray(i)?i.join(", "):this.vehicle.engine_capacities}catch{return this.vehicle.engine_capacities}},formattedFuelTypes(){try{const i=JSON.parse(this.vehicle.fuel_types);return Array.isArray(i)?i.join(", "):this.vehicle.fuel_types}catch{return this.vehicle.fuel_types}},gradesArray(){let i;try{i=JSON.parse(this.vehicle.grades)}catch{return[]}return Array.isArray(i)?i.map(e=>(e==null?void 0:e.grade)??""):i&&i.grade?[i.grade]:[]},allImages(){return[...this.mainImages,...this.thumbnailImages]},galleryImages(){return this.allImages},hasVideo(){return this.vehicle.media.some(i=>{var e;return((e=i.custom_properties)==null?void 0:e.type)==="vehicle_video"})},imageCategories(){const i=this.allImages.map(e=>{var l;return(l=e.custom_properties)==null?void 0:l.category}).filter(Boolean);return["All",...new Set(i)]}},mounted(){console.log(this.$refs.thumbsSwiper),window.addEventListener("resize",this.onResize),this.allImages.slice(1,5).forEach((i,e)=>{this.thumbLoaded[e+1]=!1})},beforeUnmount(){window.removeEventListener("resize",this.onResize)},methods:{rawList(i){const e=n=>n.map(a=>a&&typeof a=="object"&&"name"in a?a.name:a).join(", ");if(i==null)return"";if(Array.isArray(i))return e(i);const l=String(i).trim();if(!l)return"";try{const n=JSON.parse(l);if(Array.isArray(n))return e(n);if(n&&typeof n=="object")return n.name??l}catch{}return l},handleGridSelect(i){this.openGallery(i+1)},openGrid(){this.isGridOpen=!0},onResize(){this.isMobile=window.innerWidth<576},setMainImage(i){this.currentThumbIndex=i,this.$nextTick(()=>{const e=this.$refs.mainSwiper.$el.swiper;e&&e.slideTo(i)})},submitEnquiry(){this.form.post(route("submit-inquiry"),{preserveScroll:!0,onSuccess:()=>{this.form.reset("name","email","mobile","purchase_time","payment_method","address","message"),G.fire({icon:"success",title:"Inquiry Submitted Successfully",showConfirmButton:!1,timer:1500})},onError:()=>{G.fire({icon:"error",title:"Something went wrong! Please try again later",showConfirmButton:!1,timer:1500})}})},startApplication(){window.location.href=route("application",{id:this.vehicle.id})},viewGallery(){console.log("View gallery clicked")},getManufacturerModel(i){var l,n;return`${((l=i.manufacture)==null?void 0:l.title)||""} ${((n=i.vehicle_model)==null?void 0:n.title)||""}`.trim()},availabilityColor(i){switch(i){case"Available":return"availability-available";case"Arriving":return"availability-arriving";case"Sold":return"availability-sold";default:return""}},openGallery(i){const e=i>0?i-1:0;this.galleryIndex=e,this.isGalleryOpen=!0,this.$nextTick(()=>{this.$refs.gallerySwiper&&this.$refs.gallerySwiper.swiper.slideTo(e)})},closeGallery(){this.isGalleryOpen=!1},nextImage(){this.galleryIndex=(this.galleryIndex+1)%this.allImages.length},prevImage(){this.galleryIndex=(this.galleryIndex+this.allImages.length-1)%this.allImages.length},showFullGallery(){this.isFullGallery=!0},showTwoCol(){this.isFullGallery=!1},onMainLoad(){this.mainImageLoaded=!0},onThumbLoad(i){this.thumbLoaded[i]=!0}}},R={class:"container px-3 px-md-5 main-container section"},q={class:"breadcrumbs mb-4"},H={class:"current"},W={class:"d-flex justify-content-between align-items-baseline mb-4 sticky-header"},K={class:"vehicle-title mb-2"},P={class:"year-pill"},Y={class:""},Q={class:"action-panel ms-auto"},X={class:"price-inline mb-3"},Z={class:"main-price"},$={class:"row mb-4"},ee={class:"col-lg-7 mb-3 mb-lg-0 px-2 pe-lg-1"},se={class:"main-image-container position-relative"},ie={key:0,class:"skeleton-placeholder"},te=["src","alt"],le={class:"col-lg-5 px-2 ps-lg-2"},ae={class:"thumbnail-grid"},re={key:0,class:"skeleton-placeholder"},oe=["src","onLoad"],ne={key:0,class:"gallery-modal"},de=["src","alt"],ce={class:"row"},me={class:"col-lg-8"},ue={class:"mb-5 px-4 py-4"},ve={class:"grades"},he={class:"overview-value"},pe={class:"grades-grid"},ge=["onClick"],fe={class:"mb-5 px-4 py-4"},ye={class:"overview-grid"},_e={class:"overview-item engine"},be={class:"overview-value"},we={class:"overview-item transmission"},Ge={class:"overview-value"},Ie={class:"overview-item drive"},ke={class:"overview-value"},xe={class:"overview-item fuel"},Le={class:"overview-value"},Se={class:"row mb-5"},Ce={class:"col-12 px-3 px-md-4 py-3 py-md-4"},Te={class:"description-content"},Ae={class:"description",ref:"descBox"},Ne=["innerHTML"],Ve={class:"col-lg-4"},Oe={class:"dealer-panel-wrapper position-sticky",style:{top:"190px"}},je={class:"dealer-card shadow border rounded-4 p-4"},Me={class:"p-4 bg-white",style:{"border-radius":"12px"}},Fe={class:"dealer-actions d-grid gap-3"},Ee=["href"];function Be(i,e,l,n,a,t){const I=p("GalleryGrid"),k=p("swiper-slide"),x=p("swiper"),L=p("ContactUs");return d(),m("div",R,[s("div",q,[e[7]||(e[7]=s("a",{href:"/"},"Home",-1)),e[8]||(e[8]=u(" / ")),e[9]||(e[9]=s("a",{href:"/available-cars"},"Listings",-1)),e[10]||(e[10]=u(" / ")),s("span",H,o(l.vehicle.manufacture.title)+" "+o(l.vehicle.vehicle_model.title),1)]),s("div",W,[s("div",null,[s("h1",K,[u(o(l.vehicle.manufacture.title)+" "+o(l.vehicle.vehicle_model.title),1),e[12]||(e[12]=s("span",{class:"separator"},"-",-1)),s("span",P,[e[11]||(e[11]=s("i",{class:"fa-solid fa-calendar-days"},null,-1)),s("span",Y,o(l.vehicle.year),1)])])]),s("div",Q,[s("div",X,[e[13]||(e[13]=s("span",{class:"upwards-label"},"Upwards",-1)),s("span",Z,o(l.vehicle.monthly_price_currency==="USD"?"$":"LKR ")+" "+o(Number(l.vehicle.monthly_price||0).toLocaleString()),1)])])]),s("div",$,[s("div",ee,[s("div",se,[a.mainImageLoaded?h("",!0):(d(),m("div",ie)),s("img",{src:t.allImages[a.currentThumbIndex].original_url,alt:t.allImages[a.currentThumbIndex].alt,class:f(["main-image",{"is-loaded":a.mainImageLoaded}]),onClick:e[0]||(e[0]=(...r)=>t.openGrid&&t.openGrid(...r)),onLoad:e[1]||(e[1]=(...r)=>t.onMainLoad&&t.onMainLoad(...r))},null,42,te),t.hasVideo?(d(),m("div",{key:1,class:"video-overlay",onClick:e[2]||(e[2]=(...r)=>i.playVideo&&i.playVideo(...r))},e[14]||(e[14]=[s("i",{class:"bi bi-play-circle"},null,-1),s("span",null,"Video",-1)]))):h("",!0)])]),s("div",le,[s("div",ae,[(d(!0),m(y,null,_(t.allImages.slice(1,5),(r,c)=>(d(),m("div",{key:c,class:"thumbnail-wrapper",onClick:e[4]||(e[4]=(...v)=>t.openGrid&&t.openGrid(...v))},[a.thumbLoaded[c+1]?h("",!0):(d(),m("div",re)),s("img",{src:r.original_url,class:f(["thumbnail-img",{"is-loaded":a.thumbLoaded[c+1]}]),onLoad:v=>t.onThumbLoad(c+1)},null,42,oe),c===3?(d(),m("div",{key:1,class:"gallery-button",onClick:e[3]||(e[3]=(...v)=>t.openGrid&&t.openGrid(...v))},e[15]||(e[15]=[s("i",{class:"fa-solid fa-images"},null,-1),s("span",null,"More Images",-1)]))):h("",!0)]))),128))])])]),g(I,{visible:a.isGridOpen,images:t.allImages,categories:t.imageCategories,onClose:e[5]||(e[5]=r=>a.isGridOpen=!1),onSelect:t.handleGridSelect},null,8,["visible","images","categories","onSelect"]),g(C,{name:"fade"},{default:b(()=>[a.isGalleryOpen?(d(),m("div",ne,[s("button",{class:"close-btn",onClick:e[6]||(e[6]=(...r)=>t.closeGallery&&t.closeGallery(...r))},"×"),g(x,{ref:"gallerySwiper",modules:n.modules,class:"gallery-swiper","initial-slide":a.galleryIndex,navigation:"",loop:"","slides-per-view":1,"space-between":0,"centered-slides":!1},{default:b(()=>[(d(!0),m(y,null,_(t.galleryImages,(r,c)=>(d(),S(k,{key:c},{default:b(()=>[s("img",{src:r.original_url,alt:r.alt,class:"gallery-slide-img"},null,8,de)]),_:2},1024))),128))]),_:1},8,["modules","initial-slide"])])):h("",!0)]),_:1}),s("div",ce,[s("div",me,[e[26]||(e[26]=s("h2",{class:"summary-title mb-4 text-left"},"Grades",-1)),s("div",ue,[s("div",ve,[s("div",he,[s("div",pe,[(d(!0),m(y,null,_(t.rawGrades,(r,c)=>(d(),m("div",{key:c,class:f(["grade-card",{active:a.selectedGradeIndex===c}]),onClick:v=>a.selectedGradeIndex=c},[e[16]||(e[16]=s("img",{src:"/images/icons/file.gif",class:"grades-icon",alt:"Grades"},null,-1)),u(" "+o(r.grade),1)],10,ge))),128))])])])]),e[27]||(e[27]=s("h2",{class:"summary-title mb-4 text-left"},"Features",-1)),s("div",fe,[s("div",ye,[s("div",_e,[e[17]||(e[17]=s("img",{src:"/images/icons/engine.gif",alt:"Engine CC",class:"overview-icon"},null,-1)),e[18]||(e[18]=s("div",{class:"overview-label"},"Engine CC",-1)),s("div",be,o(t.rawList(t.selectedGrade.engine_capacities)||t.rawList(l.vehicle.engine_capacities)||"–"),1)]),s("div",we,[e[19]||(e[19]=s("img",{src:"/images/icons/management.gif",alt:"Transmission",class:"overview-icon"},null,-1)),e[20]||(e[20]=s("div",{class:"overview-label"},"Transmission",-1)),s("div",Ge,o(t.selectedGrade.transmission),1)]),s("div",Ie,[e[21]||(e[21]=s("img",{src:"/images/icons/chassis.gif",alt:"Drive Type",class:"overview-icon"},null,-1)),e[22]||(e[22]=s("div",{class:"overview-label"},"Chassis No",-1)),s("div",ke,o((t.selectedGrade.chassis_nos||[]).join(", ")),1)]),s("div",xe,[e[23]||(e[23]=s("img",{src:"/images/icons/bio-oil.gif",alt:"Fuel Types",class:"overview-icon"},null,-1)),e[24]||(e[24]=s("div",{class:"overview-label"},"Fuel Types",-1)),s("div",Le,o((t.selectedGrade.fuel_types||[]).map(r=>r.name).join(", ")),1)])])]),s("div",Se,[s("div",Ce,[s("div",Te,o(t.selectedGrade.description),1)])]),s("div",Ae,[e[25]||(e[25]=s("h1",{class:"fw-bold text-start",style:{"font-size":"30px","margin-bottom":"2rem"}},"Description",-1)),s("div",{innerHTML:i.$page.props.vehicle.editorContent},null,8,Ne)],512)]),s("div",Ve,[s("div",Oe,[s("div",je,[s("div",Me,[e[30]||(e[30]=T('<div class="dealer-profile mb-4 text-center" data-v-4d38fb4e><img src="/images/test.jpg.png" alt="Dealer Profile" class="profile-picture mb-3" style="width:80px;height:80px;border-radius:50%;object-fit:cover;" data-v-4d38fb4e><h5 class="dealer-name mb-1" data-v-4d38fb4e>World Auto Dealers</h5></div><div class="row dealer-contact-links mb-2 gx-2 gy-2" data-v-4d38fb4e><div class="row row-cols-1 row-cols-md-auto gx-2 gy-2 mb-4" data-v-4d38fb4e><div class="col" data-v-4d38fb4e><a href="tel:+94114001499" class="dealer-link d-flex align-items-center justify-content-md-end w-100" data-v-4d38fb4e><img src="/images/call.png" class="flat-icon me-2" alt="Call Dealer" data-v-4d38fb4e><span data-v-4d38fb4e>+94 11 400 1 499</span></a></div></div></div>',2)),s("div",Fe,[s("a",{href:t.whatsappLink,target:"_blank",rel:"noopener",class:"secondary-btn w-100"},e[28]||(e[28]=[u(" Chat Via WhatsApp "),s("img",{src:"/images/Vector.png",class:"arrow-icon_1",alt:""},null,-1)]),8,Ee),e[29]||(e[29]=s("a",{href:"/available-cars",class:"view-stock-link"},[u(" View all dealer’s stock "),s("i",{class:"bi bi-chevron-right"}),s("img",{src:"/images/Vector.png",class:"arrow-icon_1"})],-1))]),g(L,{vehicle:l.vehicle},null,8,["vehicle"])])])])])])])}const Ze=D(J,[["render",Be],["__scopeId","data-v-4d38fb4e"]]);export{Ze as default};
