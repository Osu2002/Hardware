import{d as u,P as p,m as v,p as t,q as _,s as o,x as l,F as a,J as w,y as d,Q as m,L as n,N as x,O as V,S,t as f,M as h}from"./index-BC79lHc5.js";import{A as P}from"./AppLayout-DiJY6Gaj.js";import{F as C}from"./FileInputComponent-BBLs8XKv.js";import A from"./SuspendedUserAlert-8pzadrtj.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-C45j6faE.js";const B={components:{Link:u.Link,AppLayout:P,FileInputComponent:C,SuspendedUserAlert:A},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,service_types:Object},data(){return{form:u.useForm({id:"",name:"",email:"",mobile_no:"",role:"",branch:"",password:"",password_confirmation:"",profile_image:"",bank_name:"",branch:"",acc_number:"",payee_name:"",branch_code:"",passbook_image:""}),password:u.useForm({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){let c=this;this.backendUser&&(this.form.id=this.backendUser.id,this.form.name=this.backendUser.name,this.form.email=this.backendUser.email,this.form.mobile_no=this.backendUser.mobile_no,this.form.bank_name=this.backendUser.bank_name,this.form.branch=this.backendUser.branch,this.form.acc_number=this.backendUser.acc_number,this.form.payee_name=this.backendUser.payee_name,this.form.branch_code=this.backendUser.branch_code,this.form.passbook_image=this.backendUser.passbook_image,this.form.role=this.backendUser.roles.length>0?this.backendUser.roles[0].id:""),$(".card-body").on("change","#role",function(s){c.form.role=$(s.target).val()}),$(".card-body").on("change","#branch",function(s){c.form.branch=$(s.target).val()})},computed:{profileImage(){return this.backendUser?this.backendUser.profile_photo_path??"":""},passbookImage(){return this.backendUser?this.backendUser.passbook_image??"":""}},methods:{submit(){this.form.post(this.backendUser?route("settings.users.update"):route("settings.users.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(c=>({...c,id:this.form.id})).put(route("settings.users.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})}}},M={class:"row"},F={class:"col-md-12"},L={class:"card mb-4"},N={class:"card-body"},E={class:"row"},R={class:"mb-3 col-md-6"},D={class:"text-danger"},O={class:"mb-3 col-md-6"},j={class:"text-danger"},q={class:"mb-3 col-md-6"},T={class:"text-danger"},W={class:"mb-3 col-md-6"},J=["value"],Q={class:"text-danger"},Y={key:0,class:"h5 my-4"},z={key:1,class:"mb-3 col-md-6"},G={class:"text-danger"},H={key:2,class:"mb-3 col-md-6"},K={class:"text-danger"},X={key:3,class:"mb-3 col-md-6"},Z={class:"text-danger"},ss={key:4,class:"mb-3 col-md-6"},os={class:"text-danger"},es={key:5,class:"mb-3 col-md-6"},rs={class:"text-danger"},ns={key:6,class:"mb-3 col-md-6"},ts={class:"text-danger"},ls={key:7,class:"h5 my-4"},as={key:8,class:"mb-3 col-md-6"},ds={class:"text-danger"},ms={key:9,class:"mb-3 col-md-6"},is={class:"text-danger"},cs={class:"mb-3 col-md-6"},bs={class:"text-danger"},ps={class:"mt-2"},fs=["disabled"],us={key:0,class:"card"},_s={class:"card-body"},ws={class:"row"},gs={key:0,class:"mb-3 col-md-6"},ks={class:"text-danger"},vs={key:1,class:"mb-3 col-md-6"},hs={class:"text-danger"},ys={class:"mt-2"},Us=["disabled"],xs={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},Vs={class:"modal-dialog modal-sm",role:"document"},Ss={class:"modal-content"},Ps={class:"modal-body py-0 px-3"},Cs={class:"row"},As={class:"col mb-1"},Is={class:"text-danger"};function Bs(c,s,i,Ms,e,b){const y=p("SuspendedUserAlert"),g=p("FileInputComponent"),k=p("Link"),U=p("AppLayout");return t(),v(U,null,{default:_(()=>[o("div",M,[o("div",F,[o("div",L,[s[36]||(s[36]=o("div",{class:"card-header pb-0"},[o("h5",null,"Backend Users"),o("p",null,"Manage Backend Users.")],-1)),s[37]||(s[37]=o("hr",null,null,-1)),o("div",N,[i.backendUser&&i.backendUser.deleted_at?(t(),v(y,{key:0,userId:i.backendUser.id},null,8,["userId"])):a("",!0),o("form",{id:"formAccountSettings",onSubmit:s[13]||(s[13]=w((...r)=>b.submit&&b.submit(...r),["prevent"]))},[o("div",E,[o("div",R,[s[19]||(s[19]=o("label",{for:"name",class:"form-label"},"Full Name",-1)),d(o("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":s[0]||(s[0]=r=>e.form.name=r)},null,512),[[m,e.form.name]]),o("div",D,n(e.form.errors.name),1)]),o("div",O,[s[20]||(s[20]=o("label",{for:"email",class:"form-label"},"Email",-1)),d(o("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":s[1]||(s[1]=r=>e.form.email=r)},null,512),[[m,e.form.email]]),o("div",j,n(e.form.errors.email),1)]),o("div",q,[s[21]||(s[21]=o("label",{for:"mobile_no",class:"form-label"},"Mobile No",-1)),d(o("input",{class:"form-control",type:"mobile_no",id:"mobile_no",name:"mobile_no","onUpdate:modelValue":s[2]||(s[2]=r=>e.form.mobile_no=r)},null,512),[[m,e.form.mobile_no]]),o("div",T,n(e.form.errors.mobile_no),1)]),o("div",W,[s[23]||(s[23]=o("label",{for:"role",class:"form-label"},"Role",-1)),d(o("select",{class:"select2 form-control form-select",id:"role","aria-label":"Default select example","onUpdate:modelValue":s[3]||(s[3]=r=>e.form.role=r)},[s[22]||(s[22]=o("option",{selected:"",value:""},"-- Select --",-1)),(t(!0),l(x,null,V(i.allRoles,r=>(t(),l("option",{key:r.id,value:r.id},n(r.name),9,J))),128))],512),[[S,e.form.role]]),o("div",Q,n(e.form.errors.role),1)]),e.form.role==7?(t(),l("div",Y,"Dealer Bank Details")):a("",!0),e.form.role==7?(t(),l("div",z,[s[24]||(s[24]=o("label",{for:"bank_name",class:"form-label"},"Bank Name",-1)),d(o("input",{class:"form-control",type:"text",id:"bank_name",name:"bank_name","onUpdate:modelValue":s[4]||(s[4]=r=>e.form.bank_name=r)},null,512),[[m,e.form.bank_name]]),o("div",G,n(e.form.errors.bank_name),1)])):a("",!0),e.form.role==7?(t(),l("div",H,[s[25]||(s[25]=o("label",{for:"branch",class:"form-label"},"Branch",-1)),d(o("input",{class:"form-control",type:"text",id:"branch",name:"branch","onUpdate:modelValue":s[5]||(s[5]=r=>e.form.branch=r)},null,512),[[m,e.form.branch]]),o("div",K,n(e.form.errors.branch),1)])):a("",!0),e.form.role==7?(t(),l("div",X,[s[26]||(s[26]=o("label",{for:"acc_number",class:"form-label"},"Account Number",-1)),d(o("input",{class:"form-control",type:"number",id:"acc_number",name:"acc_number","onUpdate:modelValue":s[6]||(s[6]=r=>e.form.acc_number=r)},null,512),[[m,e.form.acc_number]]),o("div",Z,n(e.form.errors.acc_number),1)])):a("",!0),e.form.role==7?(t(),l("div",ss,[s[27]||(s[27]=o("label",{for:"payee_name",class:"form-label"},"Payee Name",-1)),d(o("input",{class:"form-control",type:"text",id:"payee_name",name:"payee_name","onUpdate:modelValue":s[7]||(s[7]=r=>e.form.payee_name=r)},null,512),[[m,e.form.payee_name]]),o("div",os,n(e.form.errors.payee_name),1)])):a("",!0),e.form.role==7?(t(),l("div",es,[s[28]||(s[28]=o("label",{for:"branch_code",class:"form-label"},"Branch Code",-1)),d(o("input",{class:"form-control",type:"text",id:"branch_code",name:"branch_code","onUpdate:modelValue":s[8]||(s[8]=r=>e.form.branch_code=r)},null,512),[[m,e.form.branch_code]]),o("div",rs,n(e.form.errors.branch_code),1)])):a("",!0),e.form.role==7?(t(),l("div",ns,[s[29]||(s[29]=o("label",{for:"passbook_image",class:"form-label me-3"},"Passbook Image",-1)),s[30]||(s[30]=o("br",null,null,-1)),f(g,{isRequired:!1,id:"passbook_image",prvImage:b.passbookImage,modelValue:e.form.passbook_image,"onUpdate:modelValue":s[9]||(s[9]=r=>e.form.passbook_image=r)},null,8,["prvImage","modelValue"]),o("div",ts,n(e.form.errors.passbook_image),1)])):a("",!0),i.backendUser?a("",!0):(t(),l("div",ls,"Authentication")),i.backendUser?a("",!0):(t(),l("div",as,[s[31]||(s[31]=o("label",{for:"password",class:"form-label"},"Password",-1)),d(o("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":s[10]||(s[10]=r=>e.form.password=r)},null,512),[[m,e.form.password]]),o("div",ds,n(e.form.errors.password),1)])),i.backendUser?a("",!0):(t(),l("div",ms,[s[32]||(s[32]=o("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),d(o("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":s[11]||(s[11]=r=>e.form.password_confirmation=r)},null,512),[[m,e.form.password_confirmation]]),o("div",is,n(e.form.errors.password),1)])),o("div",cs,[s[33]||(s[33]=o("label",{for:"profile_image",class:"form-label me-3"},"Profile Image",-1)),s[34]||(s[34]=o("br",null,null,-1)),f(g,{isRequired:!1,id:"profile_image",prvImage:b.profileImage,modelValue:e.form.profile_image,"onUpdate:modelValue":s[12]||(s[12]=r=>e.form.profile_image=r)},null,8,["prvImage","modelValue"]),o("div",bs,n(e.form.errors.profile_image),1)])]),o("div",ps,[o("button",{type:"submit",class:"btn btn-main me-2",disabled:e.form.processing},n(i.backendUser?"Update":"Save"),9,fs),f(k,{class:"btn btn-outline-danger",href:c.route("settings.users")},{default:_(()=>s[35]||(s[35]=[h("Cancel")])),_:1},8,["href"])])],32)])]),i.backendUser&&i.backendUser.deleted_at==null?(t(),l("div",us,[s[41]||(s[41]=o("div",{class:"card-header pb-0"},[o("h5",null,"Update Password")],-1)),o("div",_s,[o("form",{id:"formAccountSettings",onSubmit:s[16]||(s[16]=w((...r)=>c.updatePasssword&&c.updatePasssword(...r),["prevent"]))},[o("div",ws,[i.backendUser?(t(),l("div",gs,[s[38]||(s[38]=o("label",{for:"password",class:"form-label"},"Password",-1)),d(o("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":s[14]||(s[14]=r=>e.password.password=r)},null,512),[[m,e.password.password]]),o("div",ks,n(e.password.errors.password),1)])):a("",!0),i.backendUser?(t(),l("div",vs,[s[39]||(s[39]=o("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),d(o("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":s[15]||(s[15]=r=>e.password.password_confirmation=r)},null,512),[[m,e.password.password_confirmation]]),o("div",hs,n(e.password.errors.password),1)])):a("",!0)]),o("div",ys,[o("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:e.form.processing||!(e.password.password.length>0&&e.password.password_confirmation.length>0)}," Update ",8,Us),f(k,{class:"btn btn-outline-danger",href:c.route("settings.users")},{default:_(()=>s[40]||(s[40]=[h("Cancel")])),_:1},8,["href"])])],32)])])):a("",!0)]),o("div",xs,[o("div",Vs,[o("div",Ss,[s[43]||(s[43]=o("div",{class:"modal-header px-3 pb-2"},[o("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1)),o("form",{id:"formAccountDelete",onSubmit:s[18]||(s[18]=w((...r)=>b.changePassword&&b.changePassword(...r),["prevent"]))},[o("div",Ps,[o("div",Cs,[o("div",As,[d(o("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":s[17]||(s[17]=r=>e.password.confirm_password=r)},null,512),[[m,e.password.confirm_password]]),o("div",Is,n(e.password.errors.confirm_password),1)])])]),s[42]||(s[42]=o("div",{class:"modal-footer px-3 pb-3"},[o("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),o("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1))],32)])])])])]),_:1})}const Os=I(B,[["render",Bs]]);export{Os as default};
