import{f as y,a2 as b,a3 as _,e as f,a4 as C,a5 as D,a6 as I,D as v,W as S,m as z,p as R,a7 as W}from"./index-BC79lHc5.js";import{a as A,b as B}from"./app-g0OZGjY8.js";function G(e){return D()?(I(e),!0):!1}function x(){const e=new Set,n=o=>{e.delete(o)};return{on:o=>{e.add(o);const t=()=>n(o);return G(t),{off:t}},off:n,trigger:(...o)=>Promise.all(Array.from(e).map(t=>t(...o)))}}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const K=()=>{};function P(...e){if(e.length!==1)return b(...e);const n=e[0];return typeof n=="function"?_(C(()=>({get:n,set:K}))):f(n)}function k(e,n,r){return y(e,(o,t,i)=>{o&&n(o,t,i)},{...r,once:!1})}var p=(e=>(e.Init="init",e.Verified="verified",e.Expired="expired",e.Error="error",e))(p||{});function F({root:e=f(),options:n={}}){const r=A(),s=f(),o=B(),t=x(),i=x(),l=x(),c=P(e),u=f("init");return k(c,async m=>{const d=await o.render(m,{...n,sitekey:r,callback:t.trigger,"expired-callback":i.trigger,"error-callback":l.trigger});s.value=d}),t.on(()=>{u.value="verified"}),i.on(()=>{u.value="expired"}),l.on(()=>{u.value="error"}),{root:c,widgetID:s,execute(){typeof s.value<"u"&&o.execute(s.value)},reset(){u.value="init",typeof s.value<"u"&&o.reset(s.value)},state:u,onVerify:t.on,onExpired:i.on,onError:l.on}}function H(e,n,r){const{root:s,state:o,widgetID:t,onError:i,onExpired:l,onVerify:c,reset:u,execute:m}=F({options:e||{}}),d=v(()=>o.value===p.Expired),E=v(()=>o.value===p.Error),V=v(()=>o.value===p.Verified);return k(t,a=>{r("load",a),r("update:widgetId",a)}),y(n,(a,w)=>{!a&&w&&!d.value&&g()}),l(()=>{r("update:modelValue",null),r("expired",t.value)}),i(a=>{r("error",a)}),c(a=>{r("success",a),r("update:modelValue",a)}),{root:s,widgetID:t,state:o,isError:E,isExpired:d,isVerified:V,reset:g,execute:m};function g(){u(),h()}function h(){r("update:modelValue",null)}}const $=S({__name:"Checkbox",props:{as:{default:"div"},widgetId:{},size:{default:"normal"},theme:{default:"light"},tabindex:{},modelValue:{}},emits:["load","error","expired","success","update:widgetId","update:modelValue"],setup(e,{emit:n}){const r=e,s=n,{root:o}=H({theme:r.theme,size:r.size,tabindex:r.tabindex},b(r,"modelValue"),s);return(t,i)=>(R(),z(W(t.as),{ref_key:"root",ref:o},null,512))}});export{$ as _};
