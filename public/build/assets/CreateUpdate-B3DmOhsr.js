import{d as c,P as u,m as y,p as i,q as _,s as o,x as m,F as b,J as w,y as l,Q as t,L as n,N as U,O as x,S as V,t as f,M as h}from"./index-BC79lHc5.js";import{A as P}from"./AppLayout-DiJY6Gaj.js";import{F as S}from"./FileInputComponent-BBLs8XKv.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-C45j6faE.js";const I={components:{Link:c.Link,AppLayout:P,FileInputComponent:S},props:{errors:Object,allRoles:Object,backendUser:Object,branches:Array,service_types:Object},data(){return{form:c.useForm({id:"",name:"",email:"",mobile_no:"",role:this.allRoles[0].id,branch:"",password:"",password_confirmation:"",profile_image:"",bank_name:"",branch:"",acc_number:"",payee_name:"",branch_code:"",passbook_image:""}),password:c.useForm({id:"",confirm_password:"",password:"",password_confirmation:""})}},mounted(){var s;let d=this;this.backendUser&&(this.form.id=this.backendUser.id,this.form.name=this.backendUser.name,this.form.email=this.backendUser.email,this.form.mobile_no=this.backendUser.mobile_no,this.form.role=this.backendUser.roles.length>0?this.backendUser.roles[0].id:"",this.form.branch=(s=this.backendUser.branch)==null?void 0:s.id),$(".card-body").on("change","#role",function(a){d.form.role=$(a.target).val()}),$(".card-body").on("change","#branch",function(a){d.form.branch=$(a.target).val()})},computed:{profileImage(){return this.backendUser?this.backendUser.profile_photo_path??"":""},passbookImage(){return this.backendUser?this.backendUser.passbook_image??"":""}},methods:{submit(){this.form.post(this.backendUser?route("settings.users.update"):route("settings.users.store"),{onSuccess:()=>{this.form.reset(),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.form.reset("password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")}})},changePassword(){this.password.transform(d=>({...d,id:this.form.id})).put(route("settings.users.change.password"),{preserveScroll:!0,errorBag:"changePassword",onSuccess:()=>{$("#confirmPasword").modal("hide"),this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("success",'<span class="text-success">Success</span><br/>',"A Record Was Created Successfully! ")},onError:()=>{this.password.reset("confirm_password","password","password_confirmation"),this.$root.showMessage("error",'<span class="text-danger">Error</span><br>',"Something went wrong! ")},onFinish:()=>{this.password.reset("confirm_password","password","password_confirmation")}})}}},A={class:"row"},M={class:"col-md-12"},F={class:"card mb-4"},L={class:"card-body"},N={class:"row"},B={class:"mb-3 col-md-6"},D={class:"text-danger"},E={class:"mb-3 col-md-6"},R={class:"text-danger"},O={class:"mb-3 col-md-6"},j={class:"text-danger"},q={class:"mb-3 col-md-6"},T=["value"],W={class:"text-danger"},J={class:"mb-3 col-md-6"},Q={class:"text-danger"},Y={class:"mb-3 col-md-6"},z={class:"text-danger"},G={class:"mb-3 col-md-6"},H={class:"text-danger"},K={class:"mb-3 col-md-6"},X={class:"text-danger"},Z={class:"mb-3 col-md-6"},ss={class:"text-danger"},os={class:"mb-3 col-md-6"},es={class:"text-danger"},rs={key:0,class:"mb-3 col-md-6"},ns={class:"text-danger"},ls={key:1,class:"mb-3 col-md-6"},ts={class:"text-danger"},as={class:"mb-3 col-md-6"},ds={class:"text-danger"},is={class:"mt-2"},ms=["disabled"],ps={key:0,class:"card"},bs={class:"card-body"},fs={class:"row"},cs={key:0,class:"mb-3 col-md-6"},us={class:"text-danger"},_s={key:1,class:"mb-3 col-md-6"},ws={class:"text-danger"},gs={class:"mt-2"},vs=["disabled"],hs={class:"modal modal-top fade",id:"confirmPasword",tabindex:"-1","aria-hidden":"true","data-bs-backdrop":"false"},ks={class:"modal-dialog modal-sm",role:"document"},ys={class:"modal-content"},Us={class:"modal-body py-0 px-3"},xs={class:"row"},Vs={class:"col mb-1"},Ps={class:"text-danger"};function Ss(d,s,a,Cs,e,p){const g=u("FileInputComponent"),v=u("Link"),k=u("AppLayout");return i(),y(k,null,{default:_(()=>[o("div",A,[o("div",M,[o("div",F,[s[38]||(s[38]=o("div",{class:"card-header pb-0"},[o("h5",null,"Dealer"),o("p",null,"Manage Dealers.")],-1)),s[39]||(s[39]=o("hr",null,null,-1)),o("div",L,[o("form",{id:"formAccountSettings",onSubmit:s[13]||(s[13]=w((...r)=>p.submit&&p.submit(...r),["prevent"]))},[o("div",N,[o("div",B,[s[19]||(s[19]=o("label",{for:"name",class:"form-label"},"Full Name",-1)),l(o("input",{class:"form-control",type:"text",id:"name",name:"name","onUpdate:modelValue":s[0]||(s[0]=r=>e.form.name=r)},null,512),[[t,e.form.name]]),o("div",D,n(e.form.errors.name),1)]),o("div",E,[s[20]||(s[20]=o("label",{for:"email",class:"form-label"},"Email",-1)),l(o("input",{class:"form-control",type:"email",id:"email",name:"email","onUpdate:modelValue":s[1]||(s[1]=r=>e.form.email=r)},null,512),[[t,e.form.email]]),o("div",R,n(e.form.errors.email),1)]),o("div",O,[s[21]||(s[21]=o("label",{for:"mobile_no",class:"form-label"},"Mobile No",-1)),l(o("input",{class:"form-control",type:"mobile_no",id:"mobile_no",name:"mobile_no","onUpdate:modelValue":s[2]||(s[2]=r=>e.form.mobile_no=r)},null,512),[[t,e.form.mobile_no]]),o("div",j,n(e.form.errors.mobile_no),1)]),o("div",q,[s[23]||(s[23]=o("label",{for:"role",class:"form-label"},"Role",-1)),l(o("select",{class:"select2 form-control form-select",id:"role","aria-label":"Default select example","onUpdate:modelValue":s[3]||(s[3]=r=>e.form.role=r)},[s[22]||(s[22]=o("option",{selected:"",value:""},"-- Select --",-1)),(i(!0),m(U,null,x(a.allRoles,r=>(i(),m("option",{key:r.id,value:r.id},n(r.name),9,T))),128))],512),[[V,e.form.role]]),o("div",W,n(e.form.errors.role),1)]),s[35]||(s[35]=o("div",{class:"h5 my-4"},"Dealer Bank Details",-1)),o("div",J,[s[24]||(s[24]=o("label",{for:"bank_name",class:"form-label"},"Bank Name",-1)),l(o("input",{class:"form-control",type:"text",id:"bank_name",name:"bank_name","onUpdate:modelValue":s[4]||(s[4]=r=>e.form.bank_name=r)},null,512),[[t,e.form.bank_name]]),o("div",Q,n(e.form.errors.bank_name),1)]),o("div",Y,[s[25]||(s[25]=o("label",{for:"branch",class:"form-label"},"Branch",-1)),l(o("input",{class:"form-control",type:"text",id:"branch",name:"branch","onUpdate:modelValue":s[5]||(s[5]=r=>e.form.branch=r)},null,512),[[t,e.form.branch]]),o("div",z,n(e.form.errors.branch),1)]),o("div",G,[s[26]||(s[26]=o("label",{for:"acc_number",class:"form-label"},"Account Number",-1)),l(o("input",{class:"form-control",type:"number",id:"acc_number",name:"acc_number","onUpdate:modelValue":s[6]||(s[6]=r=>e.form.acc_number=r)},null,512),[[t,e.form.acc_number]]),o("div",H,n(e.form.errors.acc_number),1)]),o("div",K,[s[27]||(s[27]=o("label",{for:"payee_name",class:"form-label"},"Payee Name",-1)),l(o("input",{class:"form-control",type:"text",id:"payee_name",name:"payee_name","onUpdate:modelValue":s[7]||(s[7]=r=>e.form.payee_name=r)},null,512),[[t,e.form.payee_name]]),o("div",X,n(e.form.errors.payee_name),1)]),o("div",Z,[s[28]||(s[28]=o("label",{for:"branch_code",class:"form-label"},"Branch Code",-1)),l(o("input",{class:"form-control",type:"text",id:"branch_code",name:"branch_code","onUpdate:modelValue":s[8]||(s[8]=r=>e.form.branch_code=r)},null,512),[[t,e.form.branch_code]]),o("div",ss,n(e.form.errors.branch_code),1)]),o("div",os,[s[29]||(s[29]=o("label",{for:"passbook_image",class:"form-label me-3"},"Passbook Image",-1)),s[30]||(s[30]=o("br",null,null,-1)),f(g,{isRequired:!1,id:"passbook_image",prvImage:p.passbookImage,modelValue:e.form.passbook_image,"onUpdate:modelValue":s[9]||(s[9]=r=>e.form.passbook_image=r)},null,8,["prvImage","modelValue"]),o("div",es,n(e.form.errors.passbook_image),1)]),s[36]||(s[36]=o("div",{class:"h5 my-4"},"Authentication",-1)),a.backendUser?b("",!0):(i(),m("div",rs,[s[31]||(s[31]=o("label",{for:"password",class:"form-label"},"Password",-1)),l(o("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":s[10]||(s[10]=r=>e.form.password=r)},null,512),[[t,e.form.password]]),o("div",ns,n(e.form.errors.password),1)])),a.backendUser?b("",!0):(i(),m("div",ls,[s[32]||(s[32]=o("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),l(o("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":s[11]||(s[11]=r=>e.form.password_confirmation=r)},null,512),[[t,e.form.password_confirmation]]),o("div",ts,n(e.form.errors.password),1)])),o("div",as,[s[33]||(s[33]=o("label",{for:"profile_image",class:"form-label me-3"},"Profile Image",-1)),s[34]||(s[34]=o("br",null,null,-1)),f(g,{isRequired:!1,id:"profile_image",prvImage:p.profileImage,modelValue:e.form.profile_image,"onUpdate:modelValue":s[12]||(s[12]=r=>e.form.profile_image=r)},null,8,["prvImage","modelValue"]),o("div",ds,n(e.form.errors.profile_image),1)])]),o("div",is,[o("button",{type:"submit",class:"btn btn-main me-2",disabled:e.form.processing},n(a.backendUser?"Update":"Save"),9,ms),f(v,{class:"btn btn-outline-danger",href:d.route("settings.users")},{default:_(()=>s[37]||(s[37]=[h("Cancel")])),_:1},8,["href"])])],32)])]),a.backendUser&&a.backendUser.deleted_at==null?(i(),m("div",ps,[s[43]||(s[43]=o("div",{class:"card-header pb-0"},[o("h5",null,"Update Password")],-1)),o("div",bs,[o("form",{id:"formAccountSettings",onSubmit:s[16]||(s[16]=w((...r)=>d.updatePasssword&&d.updatePasssword(...r),["prevent"]))},[o("div",fs,[a.backendUser?(i(),m("div",cs,[s[40]||(s[40]=o("label",{for:"password",class:"form-label"},"Password",-1)),l(o("input",{class:"form-control",type:"password",id:"password",name:"password","onUpdate:modelValue":s[14]||(s[14]=r=>e.password.password=r)},null,512),[[t,e.password.password]]),o("div",us,n(e.password.errors.password),1)])):b("",!0),a.backendUser?(i(),m("div",_s,[s[41]||(s[41]=o("label",{for:"confirm_password",class:"form-label"},"Confirm Password",-1)),l(o("input",{class:"form-control",type:"password",id:"confirm_password",name:"confirm_password","onUpdate:modelValue":s[15]||(s[15]=r=>e.password.password_confirmation=r)},null,512),[[t,e.password.password_confirmation]]),o("div",ws,n(e.password.errors.password),1)])):b("",!0)]),o("div",gs,[o("button",{type:"submit",class:"btn btn-main me-2","data-bs-toggle":"modal","data-bs-target":"#confirmPasword",disabled:e.form.processing||!(e.password.password.length>0&&e.password.password_confirmation.length>0)}," Update ",8,vs),f(v,{class:"btn btn-outline-danger",href:d.route("settings.users")},{default:_(()=>s[42]||(s[42]=[h("Cancel")])),_:1},8,["href"])])],32)])])):b("",!0)]),o("div",hs,[o("div",ks,[o("div",ys,[s[45]||(s[45]=o("div",{class:"modal-header px-3 pb-2"},[o("h5",{class:"modal-title",id:"exampleModalLabel2"}," Enter Your Password ")],-1)),o("form",{id:"formAccountDelete",onSubmit:s[18]||(s[18]=w((...r)=>p.changePassword&&p.changePassword(...r),["prevent"]))},[o("div",Us,[o("div",xs,[o("div",Vs,[l(o("input",{type:"password",id:"confirmPassword",class:"form-control",placeholder:"········","onUpdate:modelValue":s[17]||(s[17]=r=>e.password.confirm_password=r)},null,512),[[t,e.password.confirm_password]]),o("div",Ps,n(e.password.errors.confirm_password),1)])])]),s[44]||(s[44]=o("div",{class:"modal-footer px-3 pb-3"},[o("button",{type:"button",class:"btn btn-sm btn-label-secondary","data-bs-dismiss":"modal"}," Close "),o("button",{type:"submit",class:"btn btn-sm btn-primary"}," Confirm ")],-1))],32)])])])])]),_:1})}const Ns=C(I,[["render",Ss]]);export{Ns as default};
