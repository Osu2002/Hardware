import{d as l}from"./index-C45j6faE.js";import{_ as i}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{x as u,p as d,s as n,z as f,E as c}from"./index-BC79lHc5.js";const p={props:{id:{type:String,default:"mytable",required:!0},class_str:{type:String,default:"display table table-striped table-hover",required:!1},url:{type:String,required:!0},reOrderUrl:{type:String,default:null,required:!1},method:{type:String,default:function(){return"GET"},required:!1},columns:{type:Array,required:!0},columnDefs:{default:function(){return[]},type:Array,required:!1},order:{default:function(){return[]},type:Array,required:!1},buttons:{default:function(){return[]},type:Array},displayLength:{type:Number,default:function(){return 10}},reload:{type:Boolean,default:function(){return!1}},lengthMenu:{type:Array,default:function(){return[[10,25,50,100,500],["10 rows","25 rows","50 rows","100 rows","500 rows"]]}},submitData:{type:Object,default:function(){return{}}}},data(){return{pageLength:10}},mounted(){this.datatable()},watch:{submitData(t,r){console.log(`Count changed from ${r} to ${t}`)}},methods:{datatable(){const t=this,r=this.$page.props.csrf_token;$("#"+this.id).DataTable({dom:"Blfr<'box table-responsive text-nowrap drag't>ip",buttons:this.buttons,processing:!0,serverSide:!0,stateSave:!1,deferRender:!0,ajax:{url:this.url,method:this.method,data:function(e){e._token=r,Object.assign(e,t.submitData)},preDrawCallback:function(e){var a=$("#"+t.id).DataTable();a.clear()}},order:this.order,columnDefs:this.columnDefs,columns:this.columns,lengthMenu:this.lengthMenu,displayLength:this.displayLength,initComplete:function(){var e=0;$(".drag").on({mousemove:function(a){var s=a.pageX-this.offsetLeft;e&&(this.scrollLeft=this.sx+e-s)},mousedown:function(a){this.sx=this.scrollLeft,e=a.pageX-this.offsetLeft}}),$(document).on("mouseup",function(){e=0})}}),$(".dt-buttons").addClass("float-right"),$(".dataTables_filter").addClass("float-left"),$("#mytable_processing").addClass("mg-top-26s").html(`<div class="spinner-border text-primary" role="status">
                                    <span class="sr-only">Loading...</span>
                                    </div>`),$(".buttons-copy, .buttons-csv, .buttons-print, .buttons-pdf, .buttons-excel").addClass("btn btn-main mr-1 btn-sm")},reloadDatatable(){var t=$("#"+this.id).DataTable();t.clear().draw(),t.ajax.reload()},reOrderColumns(t){var r=this,e=t.start;t.end;var a=[];$("tr div.change-order").each(function(s,o){a.push({id:$(this).attr("data-item-id"),position:e+(s+1)})}),r.reOrderUrl&&l.Inertia.post(r.reOrderUrl,{rows:a},{preserveScroll:!0,onSuccess:()=>{r.reloadDatatable()}})}}};function m(t,r,e,a,s,o){return d(),u("div",null,[n("table",{id:"mytable",class:c(e.class_str)},[n("thead",null,[f(t.$slots,"header")]),r[0]||(r[0]=n("tbody",null,null,-1))],2)])}const g=i(p,[["render",m]]);export{g as D};
